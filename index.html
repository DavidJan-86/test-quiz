<script>
  let questions = [];
  let selectedQuestions = [];
  let currentQuestion = 0;
  let userAnswers = [];
  const numberOfQuestions = 2; // 游댢 zde nastav칤코 kolik ot치zek se m치 vygenerovat

  async function loadQuestions() {
    const response = await fetch("questions.json");
    const allQuestions = await response.json();

    // n치hodn캩 zam칤chat ot치zky
    const shuffled = allQuestions.sort(() => 0.5 - Math.random());
    // vybrat jen po쬬dovan칳 po캜et
    selectedQuestions = shuffled.slice(0, numberOfQuestions);
  }

  function showQuestion() {
    const q = selectedQuestions[currentQuestion];
    quizDiv.innerHTML = `
      <div class="question">
        <p>${q.text}</p>
        ${q.options.map((opt,i)=>`
          <label><input type="radio" name="q${currentQuestion}" value="${i}"> ${opt}</label><br>
        `).join("")}
      </div>
    `;
  }

  function showResults() {
    resultsDiv.classList.remove("hidden");
    resultsDiv.innerHTML = "<h2>V칳sledky testu</h2>";
    selectedQuestions.forEach((q,i)=>{
      const correct = q.answer;
      const user = userAnswers[i];
      const div = document.createElement("div");
      div.classList.add("question");
      div.innerHTML = `<p>${i+1}. ${q.text}</p>`;
      q.options.forEach((opt,j)=>{
        const span = document.createElement("span");
        span.textContent = opt;
        if (j === correct) span.classList.add("correct");
        if (user === j && user !== correct) span.classList.add("wrong");
        div.appendChild(span);
        div.appendChild(document.createElement("br"));
      });
      if (user !== correct) {
        const ans = document.createElement("div");
        ans.classList.add("answer");
        ans.textContent = "Spr치vn치 odpov캩캞: " + q.options[correct];
        div.appendChild(ans);
      }
      resultsDiv.appendChild(div);
    });
  }
</script>
